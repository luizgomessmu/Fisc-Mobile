
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <title>FiscObras GPS - 04/02/2026</title>
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
            <style>
                body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
                #map { height: 100vh; width: 100vw; }
                
                .btn-gps { 
                    position: fixed; bottom: 30px; right: 20px; z-index: 1000; 
                    background: white; color: #007AFF; width: 55px; height: 55px; 
                    border-radius: 50%; border: none; font-size: 24px; 
                    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                    display: flex; align-items: center; justify-content: center;
                }

                .leaflet-popup-content-wrapper {
                    border-radius: 12px;
                    padding: 5px;
                    box-shadow: 0 3px 14px rgba(0,0,0,0.2);
                }
                .leaflet-popup-content {
                    margin: 15px;
                    line-height: 1.6;
                    font-size: 15px;
                    color: #333;
                }
                .popup-title { font-size: 17px; margin-bottom: 4px; display: block; }
                .popup-label { color: #000; font-weight: bold; }
                .popup-value { color: #555; }
                .popup-divider { border-top: 1px solid #ccc; margin: 10px 0; }
                .popup-process { color: #007AFF; font-weight: bold; text-decoration: none; }
                .popup-obs { font-style: italic; color: #666; font-size: 13px; }

                .info-banner {
                    position: fixed; top: 10px; left: 10px; right: 10px; z-index: 1000;
                    background: white; padding: 12px; border-radius: 8px;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.1); font-size: 14px;
                }
            </style>
        </head>
        <body>
            <div class="info-banner">
                <b>Rota:</b> 04/02/2026 | 9 locais
            </div>
            <button class="btn-gps" onclick="clicouNoBotao()">üß≠</button>
            <div id="map"></div>

            <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
            <script>
                const map = L.map('map', { zoomControl: false });
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

                const dados = [{"lat": -22.934605296158853, "lon": -43.02418311776262, "logradouro": "EDGAR BORGES, DR", "quadra": "4", "lote": "9", "inscricao": "2013620345", "processo": "9900118044/2024", "obs_proc": "Verificar se no local funciona como canil/pet ou se apenas possui uso residencial."}, {"lat": -22.926523015899246, "lon": -43.004980844598634, "logradouro": "4 (JARDIM FLUMINENSE)", "quadra": "E", "lote": "12", "inscricao": "2022290152", "processo": "9900013791/2024", "obs_proc": "Aceite. Agendado para o dia 04/02/2026. 981592590 - Henrique"}, {"lat": -22.945318892981057, "lon": -43.01556718174942, "logradouro": "JOAO BATISTA LEAL,DR", "quadra": "S", "lote": "8", "inscricao": "2024052063", "processo": "80/4584/2015", "obs_proc": "Vistoriar no dia 04/02/2026 para identificar se est\u00e1 constru\u00eddo conforme o projeto. O propriet\u00e1rio deseja retomar o processo que foi largado. Ap\u00f3s vistoria, o propriet\u00e1rio deve solicitar a retomada do processo. 992580935 - Luis Ant\u00f4nio."}, {"lat": -22.93122812249388, "lon": -43.01279451216095, "logradouro": "GUATEMALA (SOTER)", "quadra": "28", "lote": "18", "inscricao": "2021920070", "processo": "80/2451/2023", "obs_proc": "Aceite agendado para o dia 04/02/2026. 988743783 - Carlos"}, {"lat": -22.94934505996699, "lon": -43.04865001448968, "logradouro": "ANTONIO RODRIGUES DA COSTA, JORN", "quadra": "232", "lote": "20", "inscricao": "2015350255", "processo": "9900185533/2025", "obs_proc": "Certid\u00e3o de Viabilidade"}, {"lat": -22.949522893514363, "lon": -43.049073803514034, "logradouro": "ANTONIO RODRIGUES DA COSTA, JORN", "quadra": "232", "lote": "24", "inscricao": "2015350311", "processo": "9900193799/2025", "obs_proc": "Certid\u00e3o de Viabilidade"}, {"lat": -22.92548850749597, "lon": -43.008930282124766, "logradouro": "JOAO R DE OLIVEIRA,DEP", "quadra": "6", "lote": "18", "inscricao": "2022150150", "processo": "80/4522/2023", "obs_proc": "[Passar l\u00e1 para verificar se finalizou]Aceite agendado para 09/01/2025 na parte da manh\u00e3. Vanessa - 21974151451"}, {"lat": -22.933749207490543, "lon": -43.02726860331879, "logradouro": "JOAO BITTENCOURT", "quadra": "18", "lote": "16", "inscricao": "2013680032", "processo": "9900018274/2024", "obs_proc": "Verificar se manteve paralisado. Obra diferente do projeto aprovado e talude \u00e0 90 graus n\u00e3o informado no projeto. Intimado. Quando fizer a fiscaliza\u00e7\u00e3o do 7651, instruir esse processo tamb\u00e9m"}, {"lat": -22.959656102953563, "lon": -43.02783054319988, "logradouro": "AMIZADE,DA", "quadra": "", "lote": "17", "inscricao": "2024341167", "processo": "9900182683/2025", "obs_proc": "Den\u00fancia de Obra irregular dentro de condom\u00ednio."}];
                const bounds = [];

                dados.forEach(item => {
                    if(item.lat && item.lon) {
                        const marker = L.marker([item.lat, item.lon]).addTo(map);
                        
                        // Layout do Bal√£o com Observa√ß√£o inclu√≠da
                        const content = `
                            <b class="popup-title">Endere√ßo: <span style="font-weight:normal; color:#444;">${item.logradouro}</span></b>
                            <span class="popup-label">Quadra:</span> <span class="popup-value">${item.quadra}</span> | 
                            <span class="popup-label">Lote:</span> <span class="popup-value">${item.lote}</span><br>
                            <span class="popup-label">Insc:</span> <span class="popup-value">${item.inscricao}</span>
                            <div class="popup-divider"></div>
                            <span class="popup-label">Processo:</span> <span class="popup-process">${item.processo}</span>
                            ${item.obs_proc ? '<br><span class="popup-label">Obs:</span> <span class="popup-obs">' + item.obs_proc + '</span>' : ''}
                        `;
                        
                        marker.bindPopup(content);
                        bounds.push([item.lat, item.lon]);
                    }
                });
                
                if(bounds.length > 0) map.fitBounds(bounds, {padding: [50, 50]});

                let userMarker;
                let deveCentralizar = false;

                map.locate({ watch: true, enableHighAccuracy: true });

                function clicouNoBotao() {
                    deveCentralizar = true;
                    if(userMarker) {
                        map.setView(userMarker.getLatLng(), 18);
                        deveCentralizar = false;
                    }
                }

                map.on('locationfound', (e) => {
                    if (!userMarker) {
                        userMarker = L.circleMarker(e.latlng, {
                            radius: 9, fillColor: '#007AFF', color: 'white', weight: 3, fillOpacity: 1
                        }).addTo(map);
                    } else {
                        userMarker.setLatLng(e.latlng);
                    }

                    if (deveCentralizar) {
                        map.setView(e.latlng, 18);
                        deveCentralizar = false;
                    }
                });

                map.on('dragstart', () => { deveCentralizar = false; });
            </script>
        </body>
        </html>
        