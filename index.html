
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <title>FiscObras GPS - 27/02/2026</title>
            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
            <style>
                body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
                #map { height: 100vh; width: 100vw; }
                
                .btn-gps { 
                    position: fixed; bottom: 30px; right: 20px; z-index: 1000; 
                    background: white; color: #007AFF; width: 55px; height: 55px; 
                    border-radius: 50%; border: none; font-size: 24px; 
                    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                    display: flex; align-items: center; justify-content: center;
                }

                .leaflet-popup-content-wrapper {
                    border-radius: 12px;
                    padding: 5px;
                    box-shadow: 0 3px 14px rgba(0,0,0,0.2);
                }
                .leaflet-popup-content {
                    margin: 15px;
                    line-height: 1.6;
                    font-size: 15px;
                    color: #333;
                }
                .popup-title { font-size: 17px; margin-bottom: 4px; display: block; }
                .popup-label { color: #000; font-weight: bold; }
                .popup-value { color: #555; }
                .popup-divider { border-top: 1px solid #ccc; margin: 10px 0; }
                .popup-process { color: #007AFF; font-weight: bold; text-decoration: none; }
                .popup-obs { font-style: italic; color: #666; font-size: 13px; }

                .info-banner {
                    position: fixed; top: 10px; left: 10px; right: 10px; z-index: 1000;
                    background: white; padding: 12px; border-radius: 8px;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.1); font-size: 14px;
                }
            </style>
        </head>
        <body>
            <div class="info-banner">
                <b>Rota:</b> 27/02/2026 | 10 locais
            </div>
            <button class="btn-gps" onclick="clicouNoBotao()">üß≠</button>
            <div id="map"></div>

            <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
            <script>
                const map = L.map('map', { zoomControl: false });
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);

                const dados = [{"lat": -22.925359721764107, "lon": -43.0129661618482, "logradouro": "Rua dos Cristais, n\u00b0 455, Lote 3B, Quadra 91", "quadra": "N/D", "lote": "N/D", "inscricao": "2013330082", "processo": "80/0918/2012", "obs_proc": "Aceite. Agendar com o Ronaldo para 27/02/2026."}, {"lat": -22.965537741182715, "lon": -43.03276646686777, "logradouro": "Rua da Amizade", "quadra": "N/D", "lote": "N/D", "inscricao": "2024270007", "processo": "080006293/2011", "obs_proc": "Aceite agendado para 27/02/2026"}, {"lat": -22.96179203905596, "lon": -43.028918302073066, "logradouro": "Rua Simpl\u00edcio Correa, 27", "quadra": "2", "lote": "27", "inscricao": "2020400559", "processo": "9900182683/2025", "obs_proc": "Den\u00fancia de Obra irregular."}, {"lat": -22.931836977052267, "lon": -43.01511727909852, "logradouro": "ROMANDA GONCALVES,PROF", "quadra": "36", "lote": "2", "inscricao": "2021860240", "processo": "9900006194/2025", "obs_proc": "Verificar se removeu o puxadinho atr\u00e1s. Caso contr\u00e1rio, intimar para legalizar."}, {"lat": -22.945979541827775, "lon": -43.023336888891265, "logradouro": "ERCULES JOVEN LAMEGO DA SILVA", "quadra": "59", "lote": "6", "inscricao": "2020970296", "processo": "9900006965/2024", "obs_proc": "Verificar se obra est\u00e1 paralisada. Comparar com foto."}, {"lat": -22.950690082509244, "lon": -43.02512819325409, "logradouro": "IRENE LOPES SODRE", "quadra": "28", "lote": "1", "inscricao": "2020681088", "processo": "9900077576/2024", "obs_proc": "Autuar por executar obra sem a devida licen\u00e7a. Multa j\u00e1 preenchida no tal\u00e3o 5586."}, {"lat": -22.940535499363943, "lon": -43.008619249799466, "logradouro": "DARWIN ALVARES MARTINS", "quadra": "80", "lote": "11", "inscricao": "2023230544", "processo": "9900166954/2025", "obs_proc": "Denuncia de obra com retroescavadeira e material na cal\u00e7ada. Diz que \u00e9 no \"final da rua\". Verificar se h\u00e1 obras em andamento. Se n\u00e3o houver, solicitar o n\u00famero do lote."}, {"lat": -22.937142719844992, "lon": -43.02082488859173, "logradouro": "ESTHER ALEXANDER ANDRADE", "quadra": "67", "lote": "19", "inscricao": "2021540318", "processo": "9900057094/2024", "obs_proc": "Intimar para atualizar a licen\u00e7a de obras. Intima\u00e7\u00e3o preenchida no tal\u00e3o 36077."}, {"lat": -22.966727158896514, "lon": -43.04230085396728, "logradouro": "PERMINIO MENDON\u00c7A DE SOUZA", "quadra": "7", "lote": "15", "inscricao": "2010150284", "processo": "9900083809/2024", "obs_proc": "Verificar se fez alguma constru\u00e7\u00e3o al\u00e9m do muro."}, {"lat": -22.935372244005617, "lon": -43.025216907948305, "logradouro": "JOSE BITTENCOURT", "quadra": "6", "lote": "9", "inscricao": "2013640330", "processo": "9900133675/2025", "obs_proc": "Verificar se manteve as obras paralisadas. Caso contr\u00e1rio, multar."}];
                const bounds = [];

                dados.forEach(item => {
                    if(item.lat && item.lon) {
                        const marker = L.marker([item.lat, item.lon]).addTo(map);
                        
                        // Layout do Bal√£o com Observa√ß√£o inclu√≠da
                        const content = `
                            <b class="popup-title">Endere√ßo: <span style="font-weight:normal; color:#444;">${item.logradouro}</span></b>
                            <span class="popup-label">Quadra:</span> <span class="popup-value">${item.quadra}</span> | 
                            <span class="popup-label">Lote:</span> <span class="popup-value">${item.lote}</span><br>
                            <span class="popup-label">Insc:</span> <span class="popup-value">${item.inscricao}</span>
                            <div class="popup-divider"></div>
                            <span class="popup-label">Processo:</span> <span class="popup-process">${item.processo}</span>
                            ${item.obs_proc ? '<br><span class="popup-label">Obs:</span> <span class="popup-obs">' + item.obs_proc + '</span>' : ''}
                        `;
                        
                        marker.bindPopup(content);
                        bounds.push([item.lat, item.lon]);
                    }
                });
                
                if(bounds.length > 0) map.fitBounds(bounds, {padding: [50, 50]});

                let userMarker;
                let deveCentralizar = false;

                map.locate({ watch: true, enableHighAccuracy: true });

                function clicouNoBotao() {
                    deveCentralizar = true;
                    if(userMarker) {
                        map.setView(userMarker.getLatLng(), 18);
                        deveCentralizar = false;
                    }
                }

                map.on('locationfound', (e) => {
                    if (!userMarker) {
                        userMarker = L.circleMarker(e.latlng, {
                            radius: 9, fillColor: '#007AFF', color: 'white', weight: 3, fillOpacity: 1
                        }).addTo(map);
                    } else {
                        userMarker.setLatLng(e.latlng);
                    }

                    if (deveCentralizar) {
                        map.setView(e.latlng, 18);
                        deveCentralizar = false;
                    }
                });

                map.on('dragstart', () => { deveCentralizar = false; });
            </script>
        </body>
        </html>
        